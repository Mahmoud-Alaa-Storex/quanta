Options +FollowSymlinks
Options -Indexes
DirectoryIndex engine/code/php/boot.php
RewriteEngine on
RewriteBase /

<IfModule mod_expires.c>
# Enable expirations
ExpiresActive On 
# Default directive
ExpiresDefault "access plus 1 month"
# My favicon
ExpiresByType image/x-icon "access plus 1 year"
# Images
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/jpg "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
# CSS
ExpiresByType text/css "access plus 1 month"
# Javascript
ExpiresByType application/javascript "access plus 1 year"
</IfModule>

RewriteCond %{REQUEST_URI} (.*)data\.json$ [NC]
RewriteRule ^(.*)$ '/403' [R=301,L]

RewriteCond %{REQUEST_URI} /+[^\.]+$
RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [R=301,L]

RewriteRule ^(css)/([0-9a-zA-Z-]+).css sites/%{HTTP_HOST}/files/css/$2.css
RewriteRule ^(js)/([0-9a-zA-Z-]+).js sites/%{HTTP_HOST}/files/js/$2.js
RewriteRule ^(files)/(.*) sites/%{HTTP_HOST}/files/$2
RewriteRule ^(tmp)/(.*) engine/tmp/%{HTTP_HOST}/files/$2 [NC]


RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)(engine)/([\/0-9a-zA-Z-\.\_]+) engine/$3

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^([0-9a-zA-Z-]+) engine/code/php/boot.php [L,QSA]

